<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{% static 'signin.css' %}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <title>Document</title>
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">

</head>
<body>
    <div class="display">
        <div class="container">
            <div class="col">
                  <div class="row g-0">
                    <div class="col-xl-6">
                      <div class="card-body p-md-5 text-black">
                        <div class="singup">
                        <h3 class="mb-5 text-uppercase">Student  registration  form</h3>
                      <form method="POST" action="signup" enctype="multipart/form-data">
                        {% csrf_token %}
                        <div class="row">
                          <div class="col-md-6 mb-4">
                            <div class="form-outline">
                              <input type="text" id="try" placeholder="Roll Number" name="Rollnumber" class="form-control form-control-lg" onkeyup="detect()"/>
                            </div>
                          </div>
                          <div class="col-md-6 mb-4">
                            <div class="form-outline">
                              <input type="text" placeholder="Name" class="form-control form-control-lg" name="Name" />
                            </div>
                          </div>
                        </div>
                          <div class="row">
                            <div class="col-md-6 mb-4">
                              <div class="form-outline">
                                <input type="text"  id="branch" placeholder="Branch" class="form-control form-control-lg" name="Branch" />
                              </div>
                            </div>
                            <div class="col-md-6 mb-4">
                              <div class="form-outline">
                                <select  id="arr" class="form-control form-control-lg" name="Section">
						<option>Section</option>
					  </select>

                              </div>
       </div>
</div>
				   <div class="form-outline mb-4">
                            <input type="text" id="year" placeholder="Year Of Studying" class="form-control form-control-lg" name="year" />
                          </div>
                          <div class="form-outline mb-4">
                            <input type="email" placeholder="Working mail" class="form-control form-control-lg" name="email" />
                          </div>
                        <div class="form-outline mb-4">
                            <h4>Profile photo</h4>
                          <input type="file" class="form-control form-control-lg" placeholder="Profile Photo" name="photo"/>
                        </div>
                      
 <div class="form-outline mb-4">
<div class="pw-meter">
    <input type="password" id="password" class="form-control form-control-lg" placeholder="Password" onkeyup="Str()"name="password">
    <div class="pw-display-toggle-btn">
    </div>
    <div class="pw-strength">
<span></span>
      <span></span>
    </div>
  </div>
 </div>
                        <div class="form-outline mb-4">
                        <div class="d-flex justify-content-end pt-3">
                          <button type="reset" class="btn btn-light btn-lg" onclick="notifyError()">Reset all</button>
                          <button type="submit" class="btn btn-warning btn-lg ms-2 btn" id="success" onclick="notifySuccess()">Submit form</button>
                        </div>

                    </form>
                    <div id="notification-area">
                      {% if messages %}
                      <div class="alerts">
                        <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span> 
                          {% for message in messages %}
                            {% if message.tags %}{% endif %}<strong>{{ message }}</strong>
                          {% endfor %}
                      </div>
                  {% endif %}
			<div class="alert" id="c">
  Make Your password strong<br><hr>
  1)Use Captial Case Letters<br>
  2)Use Lower Case Letters<br>
  3)Use Symobls<br>
  4)Use Numbers<br>
  5)Length must be more than eleven characters
</div>
                    </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            </div>

            <script>

let flag=0;
function detect(){
let text=document.getElementById("try").value;
let l=text.length;
let text1=document.getElementById("try");
text1.value=text1.value.toUpperCase();
console.log(text.toUpperCase());
let year=document.getElementById("year");

//Year
if (l>=2 && text[0]=="2" && text[1]=="2")
{
 year.value=1
}
else if (l>=2 && text[0]=="2" && text[1]=="1")
{
 year.value=2
}
else if (l>=2 && text[0]=="2" && text[1]=="0")
{
 year.value=3
}
else if (l>=2 && text[0]=="1" && text[1]=="9")
{
 year.value=4
}
else{
year.value=""
}

//Branch
var x=document.getElementById("arr");
let branch=document.getElementById("branch");
if (l>=8 && text[7]==="3" && text[6]==="4"){
branch.value='CSE-AI';
var array=['A','B','C','D'];
if (flag==0){
sec(array);
flag=1;
}
else{
console.log(x.options.length);
z=x.options.length;
remove(z);
sec(array);
}
}
else if(l>=8 && text[7]==="2" && text[6]==="4"){
branch.value='CSE-DS';
var array=['A','B'];
if (flag==0){
sec(array);
flag=1;
}
else{
console.log(x.options.length);
z=x.options.length;
remove(z);
sec(array);
}
}
else{
branch.value='';
var array=['A','B'];
}
function sec(params){
for (i=0;i<params.length;i++){
var option=document.createElement("option");
option.text=array[i];
x.add(option);
}
}
function remove(k)
{
console.log(x.options.length);
for(let j=1;j<=k;j++){
x.remove(1);
}
}
}
function getPasswordStrength(password){
  let s = 0;
  if(password.length > 6){
    s++;
  }
  if(password.length > 10){
    s++;
  }
  if(/[A-Z]/.test(password)){
    s++;
  }
  if(/[0-9]/.test(password)){
    s++;
  }
  if(/[^A-Za-z0-9]/.test(password)){
    s++;
  }
  return s;
}
document.querySelector(".pw-meter #password").addEventListener("focus",function(){
  document.querySelector(".pw-meter .pw-strength").style.display = "block";
});
document.querySelector(".pw-meter .pw-display-toggle-btn").addEventListener("click",function(){
  let el = document.querySelector(".pw-meter .pw-display-toggle-btn");
  if(el.classList.contains("active")){
    document.querySelector(".pw-meter #password").setAttribute("type","password");
    el.classList.remove("active");
  } else {
    document.querySelector(".pw-meter #password").setAttribute("type","text");
    el.classList.add("active");
  }
});

document.querySelector(".pw-meter #password").addEventListener("keyup",function(e){
  let password = e.target.value;
  let strength = getPasswordStrength(password);
  let passwordStrengthSpans = document.querySelectorAll(".pw-meter .pw-strength span");
  strength = Math.max(strength,1);
  passwordStrengthSpans[1].style.width = strength*20 + "%";
  if(strength < 2){
    passwordStrengthSpans[0].innerText = "Weak";
    passwordStrengthSpans[0].style.color = "#fff";
    passwordStrengthSpans[1].style.background = "#d13636";
    let b=document.getElementById("success").disabled=true;
  } else if(strength >= 2 && strength <= 4){
    passwordStrengthSpans[0].innerText = "Medium";
    passwordStrengthSpans[0].style.color = "#fff";
    passwordStrengthSpans[1].style.background = "#e6da44";
    let b=document.getElementById("success").disabled=true;
  } else {
    passwordStrengthSpans[0].innerText = "Strong";
    passwordStrengthSpans[0].style.color = "#fff";
    passwordStrengthSpans[1].style.background = "#20a820";
    let b=document.getElementById("success").disabled=false;
    let p=document.getElementById("c");
    p.style.display="none";
  }
});
function Str(){

let p=document.getElementById("c");
p.style.display="block";
}
function notifySuccess()
{
  let z=document.getElementById("d");
    z.style.display="block";
}
            </script>
</body>
</html>